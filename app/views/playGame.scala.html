@(placeShipForm:Form[PlaceShipData], removeShipForm:Form[Int], errorMsg:Option[String], showValidationRes:Boolean)

@import de.htwg.scala.solitairebattleship.view.Formatter
@import de.htwg.scala.solitairebattleship.model.IGame
@import de.htwg.scala.solitairebattleship.model.Model
@import de.htwg.scala.solitairebattleship.model.Ship
@import helper._

@main("Solitaire Battleship") {
  <h1>Play Game</h1>

  @grid
  @unplacedShips
  @hiddenForm

  @if(!errorMsg.isEmpty) {
    <script type="text/javascript">alert("@errorMsg.get")</script>
  }

}

@grid = {
    <table>
    <tr>
      <td>@(" ")</td>
      @for(x <- 0 until Model.game.gridSize) {
        <td>@((x+65).toChar)</td>
      }
      <td>@(" ")</td>
    </tr>

    @for(y <- 0 until Model.game.gridSize) {
      <tr>
        <td>@((y+65).toChar)</td>
        @for(x <- 0 until Model.game.gridSize) {
          <td>
            @{
              val s:Ship = Model.game.gameGrid.getCell(x, y)
              if(s == null) {
                "~"
              } else {
                s.id.toString
              }
            }
          </td>
        }
        <td>@(Model.game.gameGrid.getRowSum(y).toString)</td>
      </tr>
    }
    <tr>
      <td>@(" ")</td>
      @for(x <- 0 until Model.game.gridSize) {
        <td>@(Model.game.gameGrid.getColumnSum(x))</td>
      }
      <td>@(" ")</td>
    </tr>
  </table>
}

@unplacedShips = {
  <div>
    @for(s <- Model.game.getUnplacedShips) {
      <div id="ship_+@(s.id.toString)" class="shipWithSize@(s.size.toString)">@(s.id.toString)</div>
    }
  </div>
}
  
@hiddenForm = {

  @form(routes.Application.placeShip) {
    @select( placeShipForm("id"), options(Formatter.shipsToShipIdList(Model.game.getUnplacedShips)) )
    @select( placeShipForm("x"), options(Formatter.coordinatesForGrid(Model.game.gridSize)) )
    @select( placeShipForm("y"), options(Formatter.coordinatesForGrid(Model.game.gridSize)) )
    @select( placeShipForm("orientation"), options(List("Horizontal", "Vertical")) )

    <input type="submit" value="Place Ship"/>
  }

  @form(routes.Application.removeShip) {
    @select( placeShipForm("id"), options(Formatter.shipsToShipIdList(Model.game.getPlacedShips)) )

    <input type="submit" value="Remove Ship"/>
  }
}